{{ form_start(form, {attr: {'id': 'detalle-form'}}) }}

<div id="detalle-container">
    <div class="detalle-item">
        {{ form_row(form.id_siniestro) }}
        
        <div class="persona-group" style="display: flex; align-items: center; gap: 8px;">
            <div style="flex: 1;">
                {{ form_row(form.id_persona) }}
            </div>
            <button type="button" class="btn btn-success add-detalle" title="Añadir otra persona">+</button>
        </div>

        {{ form_row(form.rol) }}
        {{ form_row(form.tipo_vehiculo) }}
        {{ form_row(form.estadoAlcoholico) }}
        {{ form_row(form.porcentajeAlcohol) }}
        {{ form_row(form.observaciones) }}
    </div>
</div>

<button type="submit" class="btn btn-primary mt-3">Guardar</button>

{{ form_end(form) }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('detalle-container');

    container.addEventListener('click', function(e) {
        if (e.target.classList.contains('add-detalle')) {
            const detalleItem = e.target.closest('.detalle-item');
            const newDetalle = detalleItem.cloneNode(true);

            // Limpiar los valores de los inputs/selects
            newDetalle.querySelectorAll('input, select, textarea').forEach(el => {
                el.value = '';
            });

            // Insertar el nuevo bloque después del actual
            container.appendChild(newDetalle);
        }
    });
});
</script>





{# <h2>Asignar Persona a Siniestro</h2>
<form method="post">
    <input type="number" name="id_persona" placeholder="ID Persona">
    <input type="number" name="id_siniestro" placeholder="ID Siniestro">
    <input type="text" name="rol" placeholder="Rol (autor, víctima, testigo)">
    <input type="text" name="estado_alcoholico" placeholder="Estado alcohólico">
    <input type="number" step="0.01" name="porcentaje_alcohol" placeholder="% Alcohol">
    <textarea name="observaciones" placeholder="Observaciones"></textarea>
    <button type="submit" class="btn btn-primary">Guardar</button>
</form> #}
